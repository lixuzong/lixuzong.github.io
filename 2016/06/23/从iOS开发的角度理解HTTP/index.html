<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>以iOS开发的角度了解HTTP协议 | Lixuzong&#39;s Blog</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="目前做iOS开发以来，使用的都是HTTP协议，所幸现在接触到的东西还是之前的知识储备所能够应付的，正好趁着还没有入职的这段时间补充点这方面的知识，当然还是从我比较熟悉的iOS的角度来进行学习。最近看的书是《图解HTTP》，也算是看了该书的一个总结吧。">
<meta property="og:type" content="article">
<meta property="og:title" content="以iOS开发的角度了解HTTP协议">
<meta property="og:url" content="http://lixuzong.com/2016/06/23/从iOS开发的角度理解HTTP/index.html">
<meta property="og:site_name" content="Lixuzong's Blog">
<meta property="og:description" content="目前做iOS开发以来，使用的都是HTTP协议，所幸现在接触到的东西还是之前的知识储备所能够应付的，正好趁着还没有入职的这段时间补充点这方面的知识，当然还是从我比较熟悉的iOS的角度来进行学习。最近看的书是《图解HTTP》，也算是看了该书的一个总结吧。">
<meta property="og:image" content="http://o835bn5qj.bkt.clouddn.com/HTTP_book">
<meta property="og:image" content="http://o835bn5qj.bkt.clouddn.com/IMG_3842.JPG">
<meta property="og:image" content="http://o835bn5qj.bkt.clouddn.com/https.JPG">
<meta property="og:updated_time" content="2016-11-04T01:51:39.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="以iOS开发的角度了解HTTP协议">
<meta name="twitter:description" content="目前做iOS开发以来，使用的都是HTTP协议，所幸现在接触到的东西还是之前的知识储备所能够应付的，正好趁着还没有入职的这段时间补充点这方面的知识，当然还是从我比较熟悉的iOS的角度来进行学习。最近看的书是《图解HTTP》，也算是看了该书的一个总结吧。">
<meta name="twitter:image" content="http://o835bn5qj.bkt.clouddn.com/HTTP_book">
  
    <link rel="alternate" href="/atom.xml" title="Lixuzong&#39;s Blog" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Lixuzong&#39;s Blog</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">do myself!</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="Flux RSS"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Rechercher"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://lixuzong.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-从iOS开发的角度理解HTTP" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2016/06/23/从iOS开发的角度理解HTTP/" class="article-date">
  <time datetime="2016-06-23T07:51:00.000Z" itemprop="datePublished">2016-06-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/读书笔记/">读书笔记</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      以iOS开发的角度了解HTTP协议
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>目前做iOS开发以来，使用的都是HTTP协议，所幸现在接触到的东西还是之前的知识储备所能够应付的，正好趁着还没有入职的这段时间补充点这方面的知识，当然还是从我比较熟悉的iOS的角度来进行学习。最近看的书是《图解HTTP》，也算是看了该书的一个总结吧。</p>
<p><img src="http://o835bn5qj.bkt.clouddn.com/HTTP_book" alt="shouhuiImage"></p>
<a id="more"></a>
<h2 id="网络基础"><a href="#网络基础" class="headerlink" title="网络基础"></a>网络基础</h2><h3 id="TCP-IP协议族"><a href="#TCP-IP协议族" class="headerlink" title="TCP/IP协议族"></a>TCP/IP协议族</h3><p>首先TCP/IP协议族不仅包括了TCP协议和IP协议，而是很多协议的总称。TCP/IP协议按照层次分为4层，分别是：应用层、传输层、网络层和数据链路层。HTTP协议在应用层，之后是传输层的TCP协议，然后是网络层的IP协议，数据链路层是与硬件相关的协议。HTTP协议规定一端是客户端，一端是服务器，这样的话数据流从客户端从上至下传输，每经过一层就加上报文头，到了服务器端之后数据流就会从下至上逐成解析。</p>
<h3 id="TCP协议"><a href="#TCP协议" class="headerlink" title="TCP协议"></a>TCP协议</h3><p>为了准确无误的将数据送到目标处，并且能够确认数据最终是否送达到对方。为了实现这个目标，TCP采用三次握手的方式。</p>
<p>结合实际中的例子比较容易理解三次握手是怎么实现的。比如在古代，A托商队给B一个东西，并且双方都要确认这条线路的安全性，那么A在这个东西里面放了一个标志SYN，B收到之后在东西里面放置了ACK表明B已经知道了，商队回来的时候将东西交还给A，A会看到自己放置的SYN和B放置的ACK，这样的话A就可以确认这条道路的安全性，但是这个时候B并不知道A收到了数据，所以这个时候A还需要在东西里放置ACK给B表明A收到了东西。简单的说就是每个端发送出东西的时候都要获得回应才能确认东西到达，所以就是三次。</p>
<h3 id="IP协议"><a href="#IP协议" class="headerlink" title="IP协议"></a>IP协议</h3><p>IP协议的作用就是把各种数据包传给对方。为了能确保准确送达，所以需要IP地址和MAC地址，IP地址指明了节点被分配的地址，MAC地址指的是网卡所属的固定地址，IP地址可变换，但是MAC地址是不会改变的。所以IP间的通信就需要MAC地址，这里就需要知道IP地址和MAC地址的对应关系，所以又出现了另一种协议ARP（Address Resolution Protocol），能通过IP地址查询到MAC地址。</p>
<h3 id="HTTP数据流程图"><a href="#HTTP数据流程图" class="headerlink" title="HTTP数据流程图"></a>HTTP数据流程图</h3><p><img src="http://o835bn5qj.bkt.clouddn.com/IMG_3842.JPG" alt="HTTP"></p>
<h2 id="HTTP协议"><a href="#HTTP协议" class="headerlink" title="HTTP协议"></a>HTTP协议</h2><p>首先先接受几个和HTTP相关的短语。</p>
<h3 id="代理"><a href="#代理" class="headerlink" title="代理"></a>代理</h3><p>代理是一种有转发功能的应用程序，它扮演了位于服务器和客户端“中间人”的角色，接收由客户端发送的请求并转发给服务器，同时也接收服务器返回的响应并转发给客户端。</p>
<blockquote>
<p>在开发过程中经常需要翻墙，也就是使用在国外的代理，这样的话就可以正常访问国外的网站了。</p>
</blockquote>
<h3 id="网关"><a href="#网关" class="headerlink" title="网关"></a>网关</h3><p>网关是转发其他服务器通信数据的服务器，接收从客户端接收到的请求之后会对请求进行处理，有时候客户端本身并不知道自己对接的是一个网关。</p>
<h3 id="HTTP首部"><a href="#HTTP首部" class="headerlink" title="HTTP首部"></a>HTTP首部</h3><p>HTTP协议首先是客户端和服务器之间的协议，在没有扩展协议的情况下只能从客户端发起请求然后服务端返回响应。</p>
<table>
<thead>
<tr>
<th>请求报文首部</th>
<th>响应报文首部</th>
</tr>
</thead>
<tbody>
<tr>
<td>请求行</td>
<td>响应首部字段</td>
</tr>
<tr>
<td>请求首部字段</td>
<td>通用首部字段</td>
</tr>
<tr>
<td>通用首部字段</td>
<td>实体首部字段</td>
</tr>
<tr>
<td>实体首部字段</td>
<td>其他</td>
</tr>
<tr>
<td>其他</td>
</tr>
</tbody>
</table>
<p>这是一个简单的示意图，分别展示了请求报文首部和响应报文的首部。这里可以看到通用首部字段和实体首部字段这两个部分是相同的，只是在请求首部字段和响应首部字段会有区别。</p>
<blockquote>
<p>GET / HTTP/1.1<br>Host: hackr.jp<br>User-Agent: Mozilla/5.0<br>Accept: text/html, application/xml;q=0.9<br>Accept-language: ja, en-us</p>
</blockquote>
<p>这里列举了几个我们经常看到的请求报文首部参数，这里写明了请求是GET方法的请求，使用的是HTTP/1.1协议，请求的地址是<em>hackr.jp</em>，客户端接收的数据是HTML数据…各种首部非常多，在用到的时候可以查阅相关的资料。</p>
<h3 id="iOS中会用到的首部"><a href="#iOS中会用到的首部" class="headerlink" title="iOS中会用到的首部"></a>iOS中会用到的首部</h3><p>HTTP/1.1协议中有很多的首部，但是大部分是针对浏览器来使用的，就目前的知识储备来看，在iOS开发当中有用到的首部有请求首部If-Match和响应首部的Etag配合使用来做网络缓存；还有HTTP的扩展协议Cookie来记录用户的登陆状态。</p>
<h4 id="If-Match-amp-Etag"><a href="#If-Match-amp-Etag" class="headerlink" title="If-Match &amp; Etag"></a>If-Match &amp; Etag</h4><p>之前看过一篇文章讲的是iOS缓存，其中有一个讲到的就是利用HTTP协议自带的网络缓存来实现。</p>
<blockquote>
<p>If-Match: “123456”</p>
</blockquote>
<p>只有当服务器资源的Etag的值为 <em>“123456”</em> 时，才会对客户端的请求作出响应，因为资源的更新那么Etag值就会发生更新，所以可以识别出资源是否已经更新或者已经过期。</p>
<h4 id="If-Modifield-Since"><a href="#If-Modifield-Since" class="headerlink" title="If-Modifield-Since"></a>If-Modifield-Since</h4><p>这个参数是请求报文首部中的参数，可以指定资源的有效时间，从字面上就可以看出如果从给出的时间上没有更新的话，服务器就会返回 <em>304 Not Modifield</em> ,如果有更新就会返回资源并且响应首部上也会加上 <em>Last-Modifield: last time</em></p>
<h4 id="Cookie-amp-amp-Set-Cookie"><a href="#Cookie-amp-amp-Set-Cookie" class="headerlink" title="Cookie &amp;&amp; Set-Cookie"></a>Cookie &amp;&amp; Set-Cookie</h4><p>Cookie是请求报文首部字段，Set-Cookie是响应报文首部字段。首先是服务器返回Set-Cookie字段将Cookie值返回给客户端，客户端每次请求的时候将该值赋值给Cookie字段，用这种形式来确定用户登录。我们在开发iOS客户端的时候往往需要使用Token来实现用户登录，我们可以利用HTTP的这个属性来进行认证。</p>
<h2 id="HTTPS"><a href="#HTTPS" class="headerlink" title="HTTPS"></a>HTTPS</h2><p>由于iOS要求全面要支持https协议，所以还是有必要了解下什么是HTTPS协议。</p>
<blockquote>
<p>HTTP + 加密 + 认证 + 完整性保护 = HTTPS</p>
</blockquote>
<p>HTTPS并非是一个新的协议，只是HTTP通信接口部分使用SSL和TLS协议代替而已。HTTP是直接和TCP通信，HTTPS是先和SSL通信，SSL和TCP通信，所以说HTTPS就是套了一层SSL协议外壳的HTTP协议。</p>
<h3 id="证书"><a href="#证书" class="headerlink" title="证书"></a>证书</h3><p>iOS开发中对各种各样的证书并不陌生，有开发者证书、发布证书、推送证书等等…  </p>
<p>要了解证书首先要知道非对称加密算法。非对称加密算法就是A经过一个固定的运算可以得到B，并且通过B可以得到A，利用这个数学公式，我们就可以用A来对数据加密，用B来对数据解密。这是基于这样的一个数学公式而产生的算法。这样的话就可以公开A或者B中的一个，被公开的那个就是公钥，保留的要私钥，这样的话谁都可以用公钥来加密，但是能解密的只有私钥。  </p>
<p>证书就是用来保存公钥的，且证明公钥的有效性。因为公钥是要发布出去的，但是公钥也需要证明其自身是有效的，这样的话就产生了证书。证书原本的意思就是权威机构发布的能有效证明的文件，那么这里的证书也是同样的道理。是权威机构发布的对公钥有效性的证明文件。这里的权威机构是被大家所认可的几家机构，如果是想要提交公钥来开具证书是需要收费的，所以Apple公司为了安全性还是挺舍得花钱的。</p>
<h3 id="HTTPS的认证过程"><a href="#HTTPS的认证过程" class="headerlink" title="HTTPS的认证过程"></a>HTTPS的认证过程</h3><p><img src="http://o835bn5qj.bkt.clouddn.com/https.JPG" alt="https"></p>
<blockquote>
<p>最后在iOS开发中如果遇到http问题的时候再进行补充。</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://lixuzong.com/2016/06/23/从iOS开发的角度理解HTTP/" data-id="civ7ii4na000bsuwloej6a4g6" class="article-share-link">Partager</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/HTTP/">HTTP</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/07/15/react-native实战/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Récent</strong>
      <div class="article-nav-title">
        
          React Native开源项目笔记(1):redux管理数据
        
      </div>
    </a>
  
  
    <a href="/2016/06/13/React Native从最基础学起 /" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Ancien</strong>
      <div class="article-nav-title">React Native从最基础学起</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Catégories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/移动开发/">移动开发</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/读书笔记/">读书笔记</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Mot-clés</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/">HTTP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ReactNative/">ReactNative</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ios-core-animation/">ios core_animation</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/设计模式-iOS/">设计模式,iOS</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Nuage de mot-clés</h3>
    <div class="widget tagcloud">
      <a href="/tags/HTTP/" style="font-size: 10px;">HTTP</a> <a href="/tags/ReactNative/" style="font-size: 20px;">ReactNative</a> <a href="/tags/iOS/" style="font-size: 10px;">iOS</a> <a href="/tags/ios-core-animation/" style="font-size: 10px;">ios core_animation</a> <a href="/tags/设计模式-iOS/" style="font-size: 10px;">设计模式,iOS</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">October 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Articles récents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/10/20/core_animation/">core animation note</a>
          </li>
        
          <li>
            <a href="/2016/08/15/ios设计模式/">ios中的设计模式实现</a>
          </li>
        
          <li>
            <a href="/2016/08/09/知识点汇总/">iOS知识点汇总(持续更新...)</a>
          </li>
        
          <li>
            <a href="/2016/07/15/react-native实战/">React Native开源项目笔记(1):redux管理数据</a>
          </li>
        
          <li>
            <a href="/2016/06/23/从iOS开发的角度理解HTTP/">以iOS开发的角度了解HTTP协议</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 李旭<br>
      Propulsé by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>